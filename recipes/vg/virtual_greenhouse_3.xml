<?xml version="1.0" encoding="ISO-8859-1"?>
<simulation name="Virtual Greenhouse">
	<integrator name="steps" type="UniSim::Steps">
		<parameter name="maxSteps" value="4380"/>
	</integrator>
	<model name="calendar" type="UniSim::Calendar">
		<parameter name="initialDate" value="1/8/2001"/>
		<parameter name="latitude" value="55.5"/>
		<parameter name="timeStep" value="120"/>
		<parameter name="timeUnit" value="m"/>
	</model>
	<model name="outdoors" type="vg::Outdoors">
		<model name="records" type="UniSim::Records">
			<parameter name="fileName" value="sel_dk.txt"/>
		</model>
	</model>
	<model name="greenhouse">
		<model name="construction">
			<model name="ventilation" type="vg::ConstructionVentilation"/>
			<model name="geometry" type="vg::ConstructionGeometry">
				<parameter name="spanWidth" value="20"/>
				<parameter name="numSpans" value="1"/>
				<parameter name="height" value="4"/>
				<parameter name="length" value="100"/>
				<parameter name="roofPitch" value="26"/>
			</model>
			<model name="cover">
				<model type="vg::ConstructionCover" name="roof1">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
				<model type="vg::ConstructionCover" name="roof2">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
				<model type="vg::ConstructionCover" name="side1">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
				<model type="vg::ConstructionCover" name="side2">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
				<model type="vg::ConstructionCover" name="end1">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
				<model type="vg::ConstructionCover" name="end2">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
				<model type="vg::ConstructionCover" name="floor">
					<parameter name="type" value="User-defined"/>
					<parameter name="diffuseTransmission" value="90"/>
					<parameter name="K" value="5.7"/>
					<parameter name="haze" value="0"/>
					<parameter name="antiReflection" value="no"/>
				</model>
			</model>
		</model>
	</model>
	<model name="indoors">
		<model name="surface" type="vg::Surface"/>
		<model name="temperature" type="vg::IndoorsTemperature"/>
		<model name="humidity" type="vg::IndoorsHumidity"/>
		<model name="CO2" type="UniSim::Fixed">
			<parameter name="parameters" value="((value 400.))"/>
		</model>
		<model name="radiation" type="vg::IndoorsRadiation"/>
		<model name="ventilation" type="vg::IndoorsVentilation">
			<model name="infiltration" type="vg::AirInfiltration"/>
			<model name="vents" type="vg::VentsVentilation"/>
		</model>
	</model>
	<model name="setpoints">
		<model name="humidity">
			<model name="minimum" type="vg::SwitchSetpointCollection">
				<model name="setpoint" type="vg::SwitchSetpoint">
					<parameter name="setpoint" value="50"/>
					<model name="timeSwitch" type="vg::TimeSwitch">
						<parameter name="onDay" value="1"/>
						<parameter name="offDay" value="365"/>
						<parameter name="onTime" value="0:0"/>
						<parameter name="offTime" value="23:59"/>
					</model>
				</model>
			</model>
			<model name="maximum" type="vg::SwitchSetpointCollection">
				<model name="setpoint" type="vg::SwitchSetpoint">
					<parameter name="setpoint" value="80"/>
					<model name="timeSwitch" type="vg::TimeSwitch">
						<parameter name="onDay" value="1"/>
						<parameter name="offDay" value="365"/>
						<parameter name="onTime" value="0:0"/>
						<parameter name="offTime" value="23:59"/>
					</model>
				</model>
			</model>
		</model>
		<model name="temperature">
			<model name="ventilation" type="vg::AdjustableSetpoint">
				<parameter name="baseSetpoint" ref="./setpoints[setpoint]"/>
				<parameter name="adjustment" ref="./adjustments[setpoint]"/>
				<parameter name="adjustmentDirection" value="decrement"/>
				<model name="setpoints" type="vg::SwitchSetpointCollection">
					<model name="setpoint" type="vg::SwitchSetpoint">
						<parameter name="setpoint" value="20"/>
						<model name="timeSwitch" type="vg::TimeSwitch">
							<parameter name="onDay" value="1"/>
							<parameter name="offDay" value="365"/>
							<parameter name="onTime" value="0:0"/>
							<parameter name="offTime" value="23:59"/>
						</model>
					</model>
				</model>
				<model name="adjustments" type="vg::SwitchSetpointCollection">
					<parameter name="emptyAllowed" value="true"/>
					<model name="setpoint" type="vg::ControlledSwitchSetpoint">
						<parameter name="setpoint" value="2"/>
						<model name="control" type="vg::ProportionalControl">
							<parameter name="actualValue" ref="indoors/humidity[rh]"/>
							<parameter name="targetValue" ref="setpoints/humidity/maximum[setpoint]"/>
							<parameter name="direction" value="floor"/>
							<parameter name="pBand" value="100"/>
							<parameter name="maxSignal" ref="..[setpoint]"/>
						</model>
						<model name="timeSwitch" type="vg::TimeSwitch">
							<parameter name="onDay" value="1"/>
							<parameter name="offDay" value="365"/>
							<parameter name="onTime" value="0:0"/>
							<parameter name="offTime" value="23:59"/>
						</model>
					</model>
				</model>
			</model>
			<model name="heating" type="vg::AdjustableSetpoint">
				<parameter name="baseSetpoint" ref="./setpoints[setpoint]"/>
				<parameter name="adjustment" ref="./adjustments[setpoint]"/>
				<parameter name="adjustmentDirection" value="increment"/>
				<model name="setpoints" type="vg::SwitchSetpointCollection">
					<model name="setpoint" type="vg::SwitchSetpoint">
						<parameter name="setpoint" value="18"/>
						<model name="timeSwitch" type="vg::TimeSwitch">
							<parameter name="onDay" value="1"/>
							<parameter name="offDay" value="365"/>
							<parameter name="onTime" value="0:0"/>
							<parameter name="offTime" value="23:59"/>
						</model>
					</model>
				</model>
				<model name="adjustments" type="vg::SwitchSetpointCollection">
					<parameter name="emptyAllowed" value="true"/>
					<model name="setpoint" type="vg::ControlledSwitchSetpoint">
						<parameter name="setpoint" value="2"/>
						<model name="control" type="vg::proportionalControl">
							<parameter name="actualValue" ref="indoors/humidity[rh]"/>
							<parameter name="targetValue" ref="setpoints/humidity/maximum[setpoint]"/>
							<parameter name="direction" value="ceiling"/>
							<parameter name="gapMultiplier" value="1.5"/>
							<parameter name="pBand" value="5"/>
							<parameter name="maxSignal" ref="..[setpoint]"/>
						</model>
						<model name="timeSwitch" type="vg::TimeSwitch">
							<parameter name="onDay" value="1"/>
							<parameter name="offDay" value="365"/>
							<parameter name="onTime" value="0:0"/>
							<parameter name="offTime" value="23:59"/>
						</model>
					</model>
				</model>
			</model>
		</model>
		<model name="CO2">
			<model name="minimum" type="vg::SwitchSetpointCollection">
				<model name="setpoint" type="vg::SwitchSetpoint">
					<parameter name="setpoint" value="650"/>
					<model name="timeSwitch" type="vg::TimeSwitch">
						<parameter name="onDay" value="1"/>
						<parameter name="offDay" value="365"/>
						<parameter name="onTime" value="0:0"/>
						<parameter name="offTime" value="23:59"/>
					</model>
				</model>
			</model>
			<model name="maximum" type="vg::SwitchSetpointCollection">
				<model name="setpoint" type="vg::SwitchSetpoint">
					<parameter name="setpoint" value="750"/>
					<model name="timeSwitch" type="vg::TimeSwitch">
						<parameter name="onDay" value="1"/>
						<parameter name="offDay" value="365"/>
						<parameter name="onTime" value="0:0"/>
						<parameter name="offTime" value="23:59"/>
					</model>
				</model>
			</model>
		</model>
	</model>
	<model name="controllers">
		<model name="heating">
			<model name="flow" type="vg::HeatingFlowController"/>
			<model name="temperature" type="vg::HeatingTemperatureController"/>
		</model>
		<model name="screen" type="vg::ScreenController">
			<model name="humidityBalance" type="vg::HumidityScreenBalance"/>
			<model name="energy" type="vg::EnergyScreenController">
				<model name="energyBalance" type="vg::EnergyScreenBalance"/>
			</model>
			<model name="shade" type="vg::ShadeScreenController"/>
			<model name="blackout" type="vg::BlackoutScreenController"/>
		</model>
		<model name="ventilation" type="vg::VentilationController">
			<model name="maximum" type="vg::VentilationMax"/>
			<model name="byHumidity" type="vg::ProportionalControl">
				<parameter name="actualValue" ref="indoors/humidity[rh]"/>
				<parameter name="targetValue" ref="setpoints/humidity/maximum[setpoint]"/>
				<parameter name="direction" value="floor"/>
				<parameter name="gapMultiplier" value="2"/>
				<parameter name="pBand" value="0.1"/>
				<parameter name="maxSignal" ref="../maximum[signal]"/>
			</model>
			<model name="byTemperature" type="vg::ProportionalControl">
				<parameter name="actualValue" ref="indoors/temperature[value]"/>
				<parameter name="targetValue" ref="setpoints/temperature/ventilation[setpoint]"/>
				<parameter name="direction" value="floor"/>
				<parameter name="pBand" value="5"/>
				<parameter name="maxSignal" ref="../maximum[signal]"/>
			</model>
			<model name="byTemperatureDiff" type="vg::VentilationByTemperatureDiff"/>
		</model>
		<model name="light" type="vg::LightController">
			<model name="switch" type="vg::LowLightSwitch">
				<parameter name="threshold" value="40"/>
				<model name="timeSwitch" type="vg::TimeSwitch">
					<parameter name="onDay" value="1"/>
					<parameter name="offDay" value="365"/>
					<parameter name="onTime" value="0:0"/>
					<parameter name="offTime" value="23:59"/>
				</model>
			</model>
			<model name="switch" type="vg::HighLightSwitch">
				<parameter name="threshold" value="60"/>
				<model name="timeSwitch" type="vg::TimeSwitch">
					<parameter name="onDay" value="1"/>
					<parameter name="offDay" value="365"/>
					<parameter name="onTime" value="0:0"/>
					<parameter name="offTime" value="23:59"/>
				</model>
			</model>
			<model name="timeSwitch" type="vg::TimeSwitch">
				<parameter name="onDay" value="1"/>
				<parameter name="offDay" value="59"/>
				<parameter name="onTime" value="6:1"/>
				<parameter name="offTime" value="21:59"/>
			</model>
			<model name="timeSwitch" type="vg::TimeSwitch">
				<parameter name="onDay" value="245"/>
				<parameter name="offDay" value="365"/>
				<parameter name="onTime" value="6:1"/>
				<parameter name="offTime" value="21:59"/>
			</model>
		</model>
		<model name="chalk" type="vg::SwitchSetpointCollection">
			<model name="switch" type="vg::SwitchSetpoint">
				<parameter name="setpoint" value="0"/>
				<model name="timeSwitch" type="vg::TimeSwitch">
					<parameter name="onDay" value="1"/>
					<parameter name="offDay" value="365"/>
					<parameter name="onTime" value="0:0"/>
					<parameter name="offTime" value="23:59"/>
				</model>
			</model>
		</model>
	</model>
	<model name="effectuators">
		<model name="pipes">
			<model name="pipe" type="vg::HeatPipe">
				<parameter name="length" value="2000"/>
				<parameter name="diameter" value="35.9"/>
			</model>
			<model name="pipe" type="vg::HeatPipe">
				<parameter name="length" value="2000"/>
				<parameter name="diameter" value="35.9"/>
			</model>
		</model>
		<model name="screens">
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="flat_roof"/>
				<parameter name="layer" value="outer"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="flat_roof"/>
				<parameter name="layer" value="mid"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="flat_roof"/>
				<parameter name="layer" value="inner"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="side1"/>
				<parameter name="layer" value="outer"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="side2"/>
				<parameter name="layer" value="outer"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="end1"/>
				<parameter name="layer" value="outer"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
			<model name="shade" type="vg::Screen">
				<parameter name="K" value="5"/>
				<parameter name="position" value="end2"/>
				<parameter name="layer" value="outer"/>
				<model name="control" type="vg::ControlElement">
					<parameter name="signal" ref="controllers/screen/shade[signal]"/>
					<parameter name="rate" value="0.00001"/>
				</model>
			</model>
		</model>
		<model name="vents">
			<model name="leeSide" type="vg::ControlElement">
				<parameter name="signal" ref="controllers/ventilation[leeSideSignal]"/>
				<parameter name="rate" value="0.00001"/>
				<parameter name="initState" value="0"/>
			</model>
			<model name="windSide" type="vg::ControlElement">
				<parameter name="signal" ref="controllers/ventilation[windSideSignal]"/>
				<parameter name="rate" ref="../leeSide[rate]"/>
				<parameter name="initState" value="0"/>
			</model>
		</model>
	</model>
	<model name="macroclimate">
		<model name="temperature" type="vg::IndoorsTemperature"/>
		<model name="humidity" type="vg::IndoorsHumidity"/>
		<model name="CO2" type="UniSim::Fixed">
			<parameter name="parameters" value="((value 400.))"/>
		</model>
		<model name="radiation" type="vg::IndoorsRadiation"/>
	</model>
	<model name="fixed" type="UniSim::Fixed">
		<parameter name="parameters" value="   (   (HeatEnergy 99.)   (EnergyUseLight 99.)   (EffectAgam 99.)   (Tgh 99.)   (Tgh_natural 99.)   (RHgh 99.)   (CO2air 99.)   (Tcov 99.)   (Tscreen 99.)   (TrLight 99.)   (VentVindu 99.)   (Leakage_heat 99.)   (Leakage_hum 99.)   (alphawind 99.)   (alphalee 99.)   (DWyield 99.)   (FWyield 99.)   (NumberPlants 99.)   (Tcrop 99.)   (VPDcrop_air 99.)   (LE 99.)   (Rn 99.)   (Bn 99.)   (Pnc 99.)   (radiIn 99.)   (Tpipe1 99.)   (Tpipe2 99.)   (spTheat 99.)   (spTvent 99.)   (spRHgh 99.)   (H2O_dehum 99.)   (Dew 99.)   (CO2supply 99.)   )"/>
	</model>
	<output type="plot">
		<parameter name="title" value="Calendar"/>
		<trace label="Day" ref="steps[stepNumber]" divisor="12"/>
		<trace label="sinb" ref="calendar[sinb]"/>
	</output>
	<output type="plot">
		<parameter name="title" value="Light setpoint"/>
		<trace label="Day" ref="steps[stepNumber]" divisor="12"/>
		<trace label="Light signal" ref="light[signal]"/>
	</output>
	<output type="plot">
		<parameter name="title" value="Energy screen"/>
		<trace label="Day" ref="steps[stepNumber]" divisor="12"/>
		<trace label="Signal" ref="controllers/screen/energy[signal]"/>
	</output>
	<output type="plot">
		<parameter name="title" value="Shade screen"/>
		<trace label="Day" ref="steps[stepNumber]" divisor="12"/>
		<trace label="Signal" ref="controllers/screen/shade[signal]"/>
	</output>
	<output type="plot">
		<parameter name="title" value="Blackout screen"/>
		<trace label="Day" ref="steps[stepNumber]" divisor="12"/>
		<trace label="Signal" ref="controllers/screen/blackout[signal]"/>
	</output>
	<output type="table">
		<parameter name="fileName" value="vg_test.txt"/>
		<trace label="Day" ref="steps[stepNumber]" divisor="12"/>
		<trace label="Light signal" ref="light[signal]"/>
	</output>
	<output type="table">
		<parameter name="fileName" value="dvv_unisim_0001.txt"/>
		<trace label="HeatEnergyi" value="fixed[HeatEnergy]"/>
		<trace label="EnergyUseLight" value="fixed[EnergyUseLight]"/>
		<trace label="ElUseDehumidifieri" value="fixed[EffectAgam]"/>
		<trace label="Tghi" value="outdoors[temperature]"/>
		<trace label="Tgh_naturali" value="fixed[Tgh_natural]"/>
		<trace label="RHghi" value="fixed[RHgh]"/>
		<trace label="CO2airi" value="fixed[CO2air]"/>
		<trace label="Tcovi" value="fixed[Tcov]"/>
		<trace label="Tscreeni" value="fixed[Tscreen]"/>
		<trace label="TrLighti" value="fixed[TrLight]"/>
		<trace label="VentVindui" value="fixed[VentVindu]"/>
		<trace label="Leakage_heati" value="fixed[Leakage_heat]"/>
		<trace label="Leakage_humi" value="fixed[Leakage_hum]"/>
		<trace label="alphawindi" value="fixed[alphawind]"/>
		<trace label="alphaleei" value="fixed[alphalee]"/>
		<trace label="DWyield" value="fixed[DWyield]"/>
		<trace label="FWyield" value="fixed[FWyield]"/>
		<trace label="NumberPlantsi" value="fixed[NumberPlants]"/>
		<trace label="Tcropi" value="fixed[Tcrop]"/>
		<trace label="VPDcrop_airi" value="fixed[VPDcrop_air]"/>
		<trace label="LEi" value="fixed[LE]"/>
		<trace label="Rni" value="fixed[Rn]"/>
		<trace label="Bni" value="fixed[Bn]"/>
		<trace label="Pnci" value="fixed[Pnc]"/>
		<trace label="radiIni" value="outdoors[radiation]"/>
		<trace label="Tpipe1i" value="fixed[Tpipe1]"/>
		<trace label="Tpipe2i" value="fixed[Tpipe2]"/>
		<trace label="spTheat" value="fixed[spTheat]"/>
		<trace label="spTvent" value="fixed[spTvent]"/>
		<trace label="spRHghi" value="fixed[spRHgh]"/>
		<trace label="H2O_dehumi" value="fixed[H2O_dehum]"/>
		<trace label="Dewi" value="fixed[Dew]"/>
		<trace label="CO2supplyi" value="fixed[CO2supply]"/>
	</output>
</simulation>