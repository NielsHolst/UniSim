<?xml version="1.0" encoding="ISO-8859-1"?>
<simulation version="1.0">
	<integrator type="UniSim::TimeStepLimited">
		<parameter name="maxSteps" value="200"/>
		<sequence>
			<model name="calendar"/>
			<model name="weather"/>
			<model name="insect"/>
		</sequence>
		<model name="RunIterator" type="UniSim::RunIteratorFixed">
			<parameter name="numIterations" value="20"/>
		</model>
	</integrator>

	<model name="calendar" type="UniSim::Calendar">
		<parameter name="followers" value="weather"/>
	</model>

	<model name="weather" type="cotton::Weather">
		<parameter name="fileName" value="Harlingen2008.txt"/>
		<parameter name="firstDate" value="1/1/2008"/>
	</model>

	<model name="insect" type="cotton::Insect">
		<parameter name="initEggs" value="100"/>
		<parameter name="initEgglayingDate" value="1/1/2008"/>
		<model name="egg" type="UniSim::Stage">
			<parameter name="duration" value="53"/>
			<parameter name="k" value="30"/>
			<model name="time" type="UniSim::DayDegrees">
				<parameter name="T0" value="9.7"/>
				<parameter name="Topt" value="32"/>
				<parameter name="Tmax" value="40"/>
			</model>
		</model>
		<model name="larva" type="UniSim::Stage">
			<parameter name="duration" value="157"/>
			<parameter name="k" value="30"/>
			<model name="time" type="UniSim::DayDegrees">
				<parameter name="T0" value="7.8"/>
				<parameter name="Topt" value="32"/>
				<parameter name="Tmax" value="40"/>
			</model>
		</model>
		<model name="pupa" type="UniSim::Stage">
			<parameter name="duration" value="86"/>
			<parameter name="k" value="30"/>
			<model name="time" type="UniSim::DayDegrees">
				<parameter name="T0" value="10.2"/>
				<parameter name="Topt" value="32"/>
				<parameter name="Tmax" value="40"/>
			</model>
		</model>
		<model name="adult" type="UniSim::Stage">
			<parameter name="duration" value="60"/>
			<parameter name="k" value="30"/>
			<model name="time" type="UniSim::Days"/>
		</model>
	</model>

	<!-- *** Screen output *** -->
	
	<output type="plot">
		<parameter name="title" value="Temperature"/>
		<variable label="Day" axis="x" value="calendar[dayInYear]"/>
		<variable label="Tmax" axis="y" value="weather[Tmax]"/>
		<variable label="Tavg" axis="y" value="weather[Tavg]"/>
		<variable label="Tmin" axis="y" value="weather[Tmin]"/>
	</output>

	<output type="plot">
		<parameter name="title" value="Insect stages"/>
		<variable label="Day" axis="x" value="calendar[dayInYear]"/>
		<variable label="Egg" axis="y" value="insect/egg[number]"/>
		<variable label="Larva" axis="y" value="insect/larva[number]"/>
		<variable label="Pupa" axis="y" value="insect/pupa[number]"/>
		<variable label="Adult" axis="y" value="insect/adult[number]"/>
	</output>

	<output type="plot" summary="yes">
		<parameter name="title" value="Julian day of first adult"/>
		<variable label="Julian day of egglaying" axis="x" value="RunIterator[iteration]"/>			
		<variable label="Julian day of first adult" axis="y" value="insect/adult[number]" summary="(xAtThreshold 1)"/>
	</output>


	<!-- *** File output *** -->
	<output type="table">
		<parameter name="filename" value="insect_stages.txt"/>
		<variable label="Day" axis="x" value="calendar[dayInYear]"/>
		<variable label="Egg" axis="y" value="insect/egg[number]"/>
		<variable label="Larva" axis="y" value="insect/larva[number]"/>
		<variable label="Pupa" axis="y" value="insect/pupa[number]"/>
		<variable label="Adult" axis="y" value="insect/adult[number]"/>
	</output>


</simulation>
