<?xml version="1.0" encoding="ISO-8859-1"?>
<simulation version="1.0">
	<integrator type="TimeStepLimited">
		<parameter name="maxSteps" value="150"/>
		<sequence>
			<model name="calendar"/>
			<model name="weather"/>
			<model name="grass"/>
			<model name="grass_eater"/>
		</sequence>
	</integrator>

	<model name="calendar" type="Calendar">
	</model>

	<model name="weather" type="UniSim::Weather">
		<model name="records" type="UniSim::Records">
			<parameter name="filename" value ="denmark-odum-1953-2009.txt"/>
		</model>
	</model>

	<model name="grass" type="herbivory::Grass">
		<model name="time" type="UniSim::DayDegrees">
			<parameter name="T0" value ="0"/>
                </model>
                <model name="vegetative" type="UniSim::Stage">
                    <parameter name="initialInflow" value ="1"/>
                    <parameter name="duration" value="110"/>
                    <parameter name="k" value="4"/>
                </model>
                    <parameter name="initBiomass" value="100"/>
                    <parameter name="r" value="0.1"/>
                    <parameter name="K" value="2000"/>
          </model>

	<model name="grass_eater" type="herbivory::Insect">
		<model name="pupa" type="UniSim::Stage">
			<model name="time" type="UniSim::DayDegrees">
				<parameter name="T0" value ="5"/>
			</model>
			<parameter name="duration" value ="120"/>
			<parameter name="k" value ="5"/>
			<parameter name="initialInflow" value ="200"/>
		</model>

		<model name="beetles" type="UniSim::Stage">
			<model name="time" type="UniSim::Days"/>
			<parameter name="duration" value ="150"/>
			<parameter name="k" value ="30"/>
		</model>
                <parameter name="attackRate" value="0.01"/>
	</model>

	<output type="plot">
		<parameter name="title" value ="Grass"/>
		<variable axis="x" label="Day" value="calendar[totalTime]"/>
		<variable axis="y" label="Density" value="grass[Biomass]"/>
	</output>
	
	
	<output type="plot">
		<parameter name="title" value ="Pupa"/>
		<variable axis="x" label="Day" value="calendar[totalTime]"/>
		<variable axis="y" label="Pupa" value="pupa[number]"/>
		<variable axis="y" label="Beetles" value="beetles[number]"/>
	</output>

	<output type="plot">
		<parameter name="title" value ="Weather"/>
		<variable axis="x" label="Day" value="calendar[totalTime]"/>
		<variable axis="y" label="Tmin" value="weather[Tmin]"/>
		<variable axis="y" label="Tavg" value="weather[Tavg]"/>
		<variable axis="y" label="Tmax" value="weather[Tmax]"/>
	</output>

	<output type="plot">
		<parameter name="title" value ="Grass time"/>
		<variable axis="x" label="Day" value="calendar[totalTime]"/>
		<variable axis="y" label="Tmin" value="grass/time[step]"/>
	</output>
        <output type="plot">
                <parameter name="title" value ="Vegetative"/>
                <variable axis="x" label="Day" value="calendar[totalTime]"/>
                <variable axis="y" label="Vegetative" value="vegetative[number]"/>
        </output>

</simulation>
