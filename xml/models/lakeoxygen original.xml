<?xml version="1.0" encoding="ISO-8859-1"?>
<simulation version="1.0">
	<integrator type="TimeStepLimited">
		<parameter name="maxSteps" value="732"/>
		<sequence>
			<model name="calendar"/>
			<model name="netproduction"/>
			<model name="OxygenConcentration"/>
			<model name="weather"/>
		</sequence>
	</integrator>

	<model name="calendar" type="UniSim::Calendar">
		<parameter name="firstDate" value="01/01/2004"/>
		<parameter name="latitude" value="55.3" comment="Gundsømagle Sø"/>
	</model>
	
	<model name="netproduction" type="lakeoxygen::Netproduction">
		<parameter name="Layers" value="3"/> <!--define the number of layers in the model -->
		<parameter name="r" value="1"/> <!--ONLY TEST-->
		<parameter name="MaxDepth" value="4"/> <!--define the max depth of the lake -->
	</model>
	
		
	<model name="OxygenConcentration" type="lakeoxygen::OxygenConcentration">
	</model>

	<model name="weather" type="lakeoxygen::Weather">
		<parameter name="filename" value="LakedataOBS2004-2005.txt"/>
		<parameter name="firstdate" value="01/01/2004"/>
		<parameter name="oxygen" value="3"/> <!--Defines the column to read the rows-->
		<parameter name="temperaturew" value="4"/> <!--Defines the column to read the rows-->
		<parameter name="DLI" value="5"/> <!--Defines the column to read the rows-->
		<parameter name="Wind" value="6"/> <!--Defines the column to read the rows-->
		
	</model>
	<!--Generating plots based on calculations -->
	<output type="plot">
		<parameter name="title" value ="Lakeenvironment"/>
		<variable axis="x" label="Day" value="calendar[daysTotal]"/>
		<variable axis="y" label="Wind [m/s]" value="weather[Wind]"/>
		<variable axis="y" label="Daylength" value="Calendar[dayLength]"/>
		<variable axis="y" label="DLI" value="weather[DLI]"/>
	</output>
	
	<output type="plot">
		<parameter name="title" value ="OxygenConcentration"/>
		<variable axis="x" label="Day" value="calendar[daysTotal]"/>
		<variable axis="y" label="Netto Production" value="Netproduction[DOsum]"/>
	</output>
	
	<output type="plot">
		<parameter name="title" value ="Observations"/>
		<variable axis="x" label="Day" value="calendar[daysTotal]"/>
		<variable axis="y" label="DO[mg/l]" value="weather[oxygen]"/>
		<variable axis="y" label="Water temp[oC]" value="weather[temperaturew]"/>
		
	</output>
	
	<output type="plot" name="LightPlot">
		<parameter name="title" value ="Prediction of Net Production"/>
		<variable axis="x" label="Day" value="calendar[daystotal]"/>
		<variable axis="y" label="Light in layer 1" value="Layer1[Light]"/>
		<variable axis="y" label="Light in layer 2" value="Layer2[Light]"/>
		<variable axis="y" label="Light in layer 3" value="Layer3[Light]"/> 
	</output>
	
	<!--Generating table output to text file-->
	<output type="Table">
		<parameter name="Filename" value ="Prediction.txt"/>
		<variable axis="x" label="Day" value="calendar[daysTotal]"/>
		<variable axis="y" label="Daylength [hr]" value="Calendar[dayLength]"/>
		<variable axis="y" label="DO[mg/l]" value="weather[oxygen]"/>
		<variable axis="y" label="Water temp[oC]" value="weather[temperaturew]"/>
		<variable axis="y" label="DLI" value="weather[DLI]"/>
	</output>
</simulation>
