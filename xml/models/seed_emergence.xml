<?xml version="1.0" encoding="ISO-8859-1"?>
<simulation version="1.0">
	<integrator type="TimeStepLimited">
		<parameter name="maxSteps" value="3600"/>
		<sequence>
			<model name="calendar"/>
			<model name="weather"/>
			<model name="seedbank"/>
		</sequence>
	</integrator>

	<model name="calendar" type="Calendar">
		<parameter name="firstDate" value="1/3/2008"/>
		<parameter name="stepsPerDay" value="24"/>
		<parameter name="followers" value="weather"/>
	</model>

	<model name="weather" type="seed_emergence::Weather">
		<parameter name="firstDate" value="1/1/2008"/>
		<parameter name="filename" value="Lg08Frunoff100%.csv"/>
	</model>

	<model name="seedbank">
		<dataset name="observations">
			<parameter name="filename" value ="emergence data.txt"/>
			<parameter name="headerLines" value ="1"/>
			<parameter name="columns" value="((day_in_year 2) (large_crabgrass 3) (goosegrass 4) (green_foxtail 5) (yellow_foxtail 6))"/>
		</dataset>

		<model name="large_crabgrass">
			<model name="time" type = "UniSim::HydroThermalTime">
				<parameter name="T0" value="8.4"/>
				<parameter name="SWPTopt" value="26"/>
				<parameter name="Kt" value="0.50"/>
				<parameter name="SWP0" value="-0.830"/>
			</model>
			<model name="emergence" type="seed_emergence::CumulativeEmergence">
				<parameter name="a" value="10.1"/>
				<parameter name="b" value="0.08"/>
			</model>
		</model>
		<model name="green_foxtail">
			<model name="time" type = "UniSim::HydroThermalTime">
				<parameter name="T0" value="6.1"/>
				<parameter name="SWPTopt" value="26"/>
				<parameter name="Kt" value="0.30"/>
				<parameter name="SWP0" value="-0.70"/>
			</model>
			<model name="emergence" type="seed_emergence::CumulativeEmergence">
				<parameter name="a" value="6.9"/>
				<parameter name="b" value="0.06"/>
			</model>
		</model>
		<model name="goosegrass">
			<model name="time" type = "UniSim::HydroThermalTime">
				<parameter name="T0" value="12.6"/>
				<parameter name="SWPTopt" value="26"/>
				<parameter name="Kt" value="0.60"/>
				<parameter name="SWP0" value="-1.21"/>
			</model>
			<model name="emergence" type="seed_emergence::CumulativeEmergence">
				<parameter name="a" value="6.2"/>
				<parameter name="b" value="0.08"/>
			</model>
		</model>
		<model name="yellow_foxtail">
			<model name="time" type = "UniSim::HydroThermalTime">
				<parameter name="T0" value="8.3"/>
				<parameter name="SWPTopt" value="25"/>
				<parameter name="Kt" value="0.13"/>
				<parameter name="SWP0" value="-0.69"/>
			</model>
			<model name="emergence" type="seed_emergence::CumulativeEmergence">
				<parameter name="a" value="4.3"/>
				<parameter name="b" value="0.08"/>
			</model>
		</model>
	</model>

	<!-- Output -->
	
	<output type="table">
		<parameter name="filename" value ="test.prn"/>
		<variable axis="x" label="DaysTotal" value="calendar[daysTotal]"/>
		<variable axis="y" label="DayInYear" value="calendar[DayInYear]"/>
	</output>
	
	<output type="plot">
		<parameter name="title" value ="Soil temperature at 2cm"/>
		<variable axis="x" label="Day" value="calendar[DayInYear]"/>
		<variable axis="y" label="Temp" value="weather[Tavg]"/>
	</output>
	<output type="plot">
		<parameter name="title" value ="Soil water potential at 2cm"/>
		<variable axis="x" label="Day" value="calendar[dayInYear]"/>
		<variable axis="y" label="SWP" value="weather[SWP]"/>
		<variable axis="y" label="Y.f. threshold" value="yellow_foxtail/time[swpThreshold]"/>
	</output>
	<output  type="plot">
		<parameter name="title" value ="Hydrothermal time at 2cm"/>
		<variable axis="x" label="Day" value="calendar[dayInYear]"/>
		<variable axis="y" label="Large crabgrass" value="large_crabgrass/time[total]"/>
		<variable axis="y" label="Green foxtail" value="green_foxtail/time[total]"/>
		<variable axis="y" label="Goosegrass" value="goosegrass/time[total]"/>
		<variable axis="y" label="Yellow foxtail" value="yellow_foxtail/time[total]"/>
	</output>
	<output  type="plot">
		<parameter name="title" value ="Cumulative emergence"/>
		<variable axis="x" label="Day" value="calendar[dayInYear]"/>
		<variable axis="y" label="Large crabgrass" value="large_crabgrass/emergence[accumulated]"/>
		<variable axis="y" label="Green foxtail" value="green_foxtail/emergence[accumulated]"/>
		<variable axis="y" label="Goosegrass" value="goosegrass/emergence[accumulated]"/>
		<variable axis="y" label="Yellow foxtail" value="yellow_foxtail/emergence[accumulated]"/>

		<data axis="x" label="Day" value="observations[day_in_year]"/>
		<data axis="y" label="Large crabgrass obs" value="observations[large_crabgrass]"/>
		<data axis="y" label="Green foxtail obs" value="observations[green_foxtail]"/>
		<data axis="y" label="Goosegrass obs" value="observations[goosegrass]"/>
		<data axis="y" label="Yellow foxtail obs" value="observations[yellow_foxtail]"/>
	</output>
</simulation>
